<!--{eval
$email = substr($user_data['email'],0,2).'******'.substr($user_data['email'],strpos($user_data['email'],'@'));
$phone = substr($user_data['phone'],0,3).'****'.substr($user_data['phone'],7,4);
}-->
<div class="tab-pane active">
    <div class="security-box J-security">
        <div class="row">
            <div class="col-xs-3">
                <p>您的账户级别：
                    <span class="J-level-desc">高</span>
                </p>
            </div>
            <div class="col-xs-6">
                <div class="state-line-box">
                    <div class="state-line J-level-line" style="width: 0%"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-3 security-label <!--{if $user_data['email']}-->level-1<!--{else}-->level-0<!--{/if}-->">
                <span>安全邮箱</span>
            </div>
            <div class="col-xs-7">
                <p class="blue J-email-show">
                    <!--{if $user_data['email']}-->
                        $email
                    <!--{else}-->
                        未设置安全邮箱
                    <!--{/if}-->
                </p>
                <div class="edit-box J-email-edit-box">
                    <form class="J-email-form">
                        <div class="row">
                            <input type="text" name="email" class="form-control" placeholder="请填写邮箱地址" id="securityEmailInput">
                            <input type="hidden" name="md5_pass" class="J-md5-pass" value="">
                        </div>
                        <div class="row">
                            <div class="col-xs-8">
                                <input type="text" name="regcode" class="form-control fetch-code-input J-check-code" placeholder="请填写验证码">
                            </div>
                            <div class="col-xs-4">
                                <input type="button"
                                       class="form-control fetch-code-btn J-check-code-btn"
                                       value="发送验证码"
                                       data-page="J-email-edit-box" data-type="email"
                                       data-target="securityEmailInput">
                            </div>
                        </div>
                        <p class="error-box"></p>
                        <div class="row">
                            <a href="javascript:void(0);" class="btn J-confirm-btn" data-type="email">确定</a>
                            <a href="javascript:void(0);" class="btn cancel-btn J-cancel-btn" data-type="email">取消</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-xs-2">
                <a href="javascript:void(0);" class="btn J-fix-btn" data-status="n" data-source="{$user_data['email']}" data-type="email">
                    <!--{if $user_data['email']}-->
                        修改
                    <!--{else}-->
                        添加
                    <!--{/if}-->
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-3 security-label <!--{if $user_data['phone']}-->level-1<!--{else}-->level-0<!--{/if}-->">
                <span>绑定手机</span>
            </div>
            <div class="col-xs-7">
                <p class="blue J-phone-show">
                    <!--{if $user_data['phone']}-->
                    {$phone}
                    <!--{else}-->
                    未绑定手机
                    <!--{/if}-->
                </p>
                <div class="edit-box J-phone-edit-box">
                    <form class="J-phone-form">
                        <div class="row">
                            <input type="text" name="phone" class="form-control" placeholder="请填写手机号码" id="securityPhoneInput">
                            <input type="hidden" name="md5_pass" class="J-md5-pass" value="">
                        </div>
                        <div class="row">
                            <div class="col-xs-8">
                                <input type="text" name="regcode" class="form-control fetch-code-input J-check-code" placeholder="请填写验证码">
                            </div>
                            <div class="col-xs-4">
                                <input type="button"
                                       class="form-control fetch-code-btn J-check-code-btn"
                                       value="发送验证码"
                                       data-page="J-phone-edit-box" data-type="phone"
                                       data-target="securityPhoneInput">
                            </div>
                        </div>
                        <p class="error-box"></p>
                        <div class="row">
                            <a href="javascript:void(0);" class="btn J-confirm-btn" data-type="phone">确定</a>
                            <a href="javascript:void(0);" class="btn cancel-btn J-cancel-btn" data-type="phone">取消</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-xs-2">
                <a href="javascript:void(0);" class="btn J-fix-btn" data-status="<!--{if $user_data['phone']}-->y<!--{else}-->n<!--{/if}-->" data-source="{$user_data['phone']}" data-type="phone">
                    <!--{if $user_data['phone']}-->
                    修改
                    <!--{else}-->
                    添加
                    <!--{/if}-->
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-3 security-label level-1">
                <span>登录密码</span>
            </div>
            <div class="col-xs-7">
                <p class="blue J-phone-show">******</p>
                <div class="edit-box J-password-edit-box">
                    <form class="J-password-form">
                        <div class="row old-password-box">
                            <input type="password" name="old-password" class="form-control J-pwd-old" placeholder="请填写旧密码">
                            <div class="warning"></div>
                        </div>
                        <div class="row">
                            <input type="password" name="password" onkeyup="security.checkPwdMode(this)" class="form-control J-pwd" placeholder="请填写新密码">
                            <div class="caps-lock-warning hide"></div>
                            <div class="pwd-level-box J-pwd-level-box">
                                <p>密码强度：<span class="J-level-desc"></span></p>
                                <div class="level-box">
                                    <div class="level"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <input type="password" name="password-confirm" class="form-control J-pwd-confirm" placeholder="请确认新密码">
                        </div>
                        <p class="error-box"></p>
                        <div class="row">
                            <a href="javascript:void(0);" class="btn J-confirm-btn" data-type="password">确定</a>
                            <a href="javascript:void(0);" class="btn cancel-btn J-cancel-btn" data-type="password">取消</a>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-xs-2">
                <a href="javascript:void(0);" class="btn J-fix-btn" data-type="password">修改</a>
            </div>
        </div>
    </div>
    <div class="alert-box J-alert"></div>
    <div class="modal fade security-modal" id="securityModel" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
            </div>
        </div>
    </div>
</div>
<script type="tpl" id="securityCheckTpl">
    <div class="modal-header">
        验证身份
        <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <form id="securityCheck">
        <div class="modal-body ">
            <div class="account-box" style="<%=sourceStatus%>">
                <div class="row">
                    <div class="col-xs-3"><%=sourceName%></div>
                    <div class="col-xs-9"><%=sourceShow%></div>
                    <input type="hidden" value="<%=source%>" id="securitySourceInput">
                </div>
                <div class="row">
                    <div class="col-xs-3 security-label">验证码</div>
                    <div class="col-xs-5">
                        <input type="text" name="regcode" class="form-control J-check-code" placeholder="请填写验证码">
                    </div>
                    <div class="col-xs-1"></div>
                    <div class="col-xs-3">
                        <input type="button" class="form-control fetch-code-btn J-check-code-btn" data-target="securitySourceInput" data-page="securityModel" data-type="<%=type%>" value="发送验证码">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-3 security-label">登录密码</div>
                <div class="col-xs-9">
				<input type="password" name="loginPassword" class="form-control J-pwd" placeholder="请输入您的登录密码">
				<div class="caps-lock-warning hide"></div>
                </div>
            </div>
            <div class="error-box" {if $message} style="display:block"{/if}>{$message}</div>
        </div>
        <div class="alert-box J-alert"></div>
        <div class="modal-footer">
            <a href="javascript:void(0);" class="btn J-confirm" data-type="<%=type%>">确定</a>
        </div>
    </form>
</script>
<script>
    accountEvents = [];
    accountEvents.push(function(){
        security.init();
    })
</script>